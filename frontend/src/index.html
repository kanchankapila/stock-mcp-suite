<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Stock Analytics Hub - AI-Powered Investment Intelligence</title>
    
    <!-- SEO and Meta Tags -->
    <meta name="description" content="Professional stock analytics platform with AI-powered insights, real-time market data, and advanced visualizations for informed investment decisions." />
    <meta name="keywords" content="stock analysis, investment tools, market data, trading dashboard, financial charts, AI analytics" />
    <meta name="author" content="Stock Analytics Hub" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Stock Analytics Hub - AI-Powered Investment Intelligence" />
    <meta property="og:description" content="Professional stock analytics platform with advanced visualizations and real-time market insights." />
    <meta property="og:url" content="https://stock-analytics-hub.com" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="Stock Analytics Hub" />
    <meta property="twitter:description" content="AI-powered stock analytics with advanced visualizations" />
    
    <!-- Favicon and PWA Icons -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%233b82f6'/><path d='M20,80 L30,60 L40,70 L50,50 L60,40 L70,30 L80,20' stroke='white' stroke-width='3' fill='none'/></svg>" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/fonts/inter-var.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preconnect" href="https://api.example.com" crossorigin />
    
    <!-- Modern CSS Framework and Chart Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    
    <!-- Chart.js with Plugins -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    
    <!-- D3.js for Advanced Visualizations -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- ApexCharts for Interactive Charts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
    
    <!-- Lightweight Charts for Financial Data -->
    <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
    
    <!-- Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://unpkg.com/lottie-web@5.12.2/build/player/lottie.min.js"></script>
    
    <style>
      :root {
        /* Enhanced Color System */
        --primary: #3b82f6;
        --primary-dark: #1e40af;
        --secondary: #64748b;
        --accent: #8b5cf6;
        
        /* Market Colors */
        --bull-green: #10b981;
        --bull-light: #34d399;
        --bear-red: #ef4444;
        --bear-light: #f87171;
        --neutral: #6b7280;
        
        /* Performance Gradients */
        --gradient-bull: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        --gradient-bear: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
        --gradient-neutral: linear-gradient(135deg, #6b7280 0%, #9ca3af 100%);
        --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        
        /* Glass Morphism */
        --glass-bg: rgba(255, 255, 255, 0.05);
        --glass-border: rgba(255, 255, 255, 0.1);
        --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        
        /* Dark Theme */
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --text-primary: #f8fafc;
        --text-secondary: #cbd5e1;
        --text-muted: #64748b;
        
        /* Typography */
        --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }
      
      /* Base Styles */
      * {
        box-sizing: border-box;
      }
      
      html {
        scroll-behavior: smooth;
      }
      
      body {
        font-family: var(--font-family);
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
        color: var(--text-primary);
        margin: 0;
        padding: 0;
        min-height: 100vh;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      /* Loading Animation */
      .loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.5s ease, visibility 0.5s ease;
      }
      
      .loading-screen.hidden {
        opacity: 0;
        visibility: hidden;
      }
      
      .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid rgba(59, 130, 246, 0.1);
        border-top: 4px solid #3b82f6;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .pulse-dots {
        display: flex;
        gap: 8px;
        margin-top: 24px;
      }
      
      .pulse-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        animation: pulse 1.5s ease-in-out infinite;
      }
      
      .pulse-dot:nth-child(1) { background: #3b82f6; animation-delay: 0s; }
      .pulse-dot:nth-child(2) { background: #8b5cf6; animation-delay: 0.3s; }
      .pulse-dot:nth-child(3) { background: #10b981; animation-delay: 0.6s; }
      
      @keyframes pulse {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
      }
      
      /* Enhanced Glass Morphism Cards */
      .glass-card {
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 16px;
        box-shadow: var(--glass-shadow);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .glass-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      }
      
      .glass-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 16px 48px rgba(0, 0, 0, 0.2);
        border-color: rgba(255, 255, 255, 0.2);
      }
      
      /* Performance Metrics */
      .metric-positive {
        color: var(--bull-green);
        background: var(--gradient-bull);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      
      .metric-negative {
        color: var(--bear-red);
        background: var(--gradient-bear);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        body {
          font-size: 14px;
        }
        
        .glass-card {
          border-radius: 12px;
        }
      }
      
      /* Accessibility */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
      
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      
      ::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
      }
      
      ::-webkit-scrollbar-thumb {
        background: rgba(59, 130, 246, 0.5);
        border-radius: 4px;
        transition: background 0.2s ease;
      }
      
      ::-webkit-scrollbar-thumb:hover {
        background: rgba(59, 130, 246, 0.7);
      }
      
      /* Chart Container Styles */
      .chart-container {
        position: relative;
        background: rgba(255, 255, 255, 0.02);
        border-radius: 12px;
        padding: 16px;
        margin: 16px 0;
      }
      
      .chart-loading {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 200px;
        color: var(--text-muted);
      }
      
      /* Fade-in Animation */
      .fade-in {
        animation: fadeIn 0.6s ease-out forwards;
      }
      
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  
  <body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
      <div class="text-center">
        <div class="loading-spinner"></div>
        <h2 class="text-2xl font-bold mt-6 mb-2" style="background: var(--gradient-primary); background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
          Stock Analytics Hub
        </h2>
        <p class="text-gray-400">Loading AI-powered market intelligence...</p>
        <div class="pulse-dots">
          <div class="pulse-dot"></div>
          <div class="pulse-dot"></div>
          <div class="pulse-dot"></div>
        </div>
      </div>
    </div>

    <!-- Main Application Container -->
    <div id="app" class="hidden"></div>
    
    <!-- Performance Monitor (Development Only) -->
    <div id="perf-monitor" class="fixed bottom-4 right-4 z-50 hidden" style="font-size: 12px; background: rgba(0, 0, 0, 0.8); color: white; padding: 8px; border-radius: 8px; font-family: monospace;">
      <div id="fps-counter">FPS: --</div>
      <div id="memory-usage">Memory: --</div>
    </div>
    
    <!-- Main Application Script -->
    <script type="module" src="/main-refactored.ts"></script>
    
    <!-- Performance Monitoring Script -->
    <script>
      // Performance monitoring (development only)
      if (window.location.hostname === 'localhost') {
        let frame = 0;
        let lastTime = Date.now();
        const perfMonitor = document.getElementById('perf-monitor');
        const fpsCounter = document.getElementById('fps-counter');
        const memoryUsage = document.getElementById('memory-usage');
        
        if (perfMonitor) {
          perfMonitor.classList.remove('hidden');
        }
        
        function updatePerformanceMetrics() {
          frame++;
          const now = Date.now();
          
          if (now - lastTime >= 1000) {
            const fps = Math.round((frame * 1000) / (now - lastTime));
            if (fpsCounter) fpsCounter.textContent = `FPS: ${fps}`;
            
            if ('memory' in performance && memoryUsage) {
              const memory = performance.memory;
              const used = Math.round(memory.usedJSHeapSize / 1048576);
              memoryUsage.textContent = `Memory: ${used}MB`;
            }
            
            frame = 0;
            lastTime = now;
          }
          
          requestAnimationFrame(updatePerformanceMetrics);
        }
        
        requestAnimationFrame(updatePerformanceMetrics);
      }
    </script>
    
    <!-- Loading Screen Hide Script -->
    <script>
      // Hide loading screen after app loads
      function hideLoadingScreen() {
        const loadingScreen = document.getElementById('loading-screen');
        const app = document.getElementById('app');
        
        if (loadingScreen) {
          loadingScreen.classList.add('hidden');
        }
        
        if (app) {
          app.classList.remove('hidden');
          app.classList.add('fade-in');
        }
      }
      
      // Hide loading screen after a delay or when DOM is ready
      const hideDelay = 2000; // 2 seconds
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          setTimeout(hideLoadingScreen, hideDelay);
        });
      } else {
        setTimeout(hideLoadingScreen, hideDelay);
      }
    </script>
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('SW registered: ', registration);
            })
            .catch((registrationError) => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
  </body>
</html>